<!DOCTYPE html>
<html lang="en">

<!-- BEGIN HEAD -->
<head>
    <meta charset="UTF-8">
    <title>Andela Hack</title>

    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link rel="stylesheet" type="text/css" href="libs/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="assets/fonts/open-sans/styles.css">
    <link rel="stylesheet" type="text/css" href="libs/tether/css/tether.min.css">
    <link rel="stylesheet" type="text/css" href="libs/jscrollpane/jquery.jscrollpane.css">
    <link rel="stylesheet" type="text/css" href="libs/flag-icon-css/css/flag-icon.min.css">
    <link rel="stylesheet" type="text/css" href="assets/styles/common.min.css">
	
	 <link rel="stylesheet" type="text/css" href="libs/sweetalert/sweetalert.css"> <!-- original -->
    <link rel="stylesheet" type="text/css" href="assets/styles/libs/sweetalert/sweetalert.min.css"> <!-- customization -->
    <!-- END GLOBAL MANDATORY STYLES -->

    <!-- BEGIN THEME STYLES -->
    <link rel="stylesheet" type="text/css" href="assets/styles/themes/primary.min.css">
    <!-- END THEME STYLES -->

<link rel="stylesheet" type="text/css" href="assets/styles/widgets/panels.min.css">
<link rel="stylesheet" type="text/css" href="assets/scripts/charts/area/area.chart.min.css">
<link rel="stylesheet" type="text/css" href="assets/scripts/charts/radial-progress/radial-progress.chart.min.css">


<link rel="stylesheet" type="text/css" href="libs/jquery-confirm/jquery-confirm.min.css"> <!-- original -->
<link rel="stylesheet" type="text/css" href="assets/styles/libs/jquery-confirm/jquery.confirm.min.css"> <!-- original -->


<link rel="stylesheet" type="text/css" href="libs/izi-modal/css/iziModal.min.css"> <!-- Original -->
<link rel="stylesheet" type="text/css" href="assets/styles/libs/izi-modal/izi-modal.min.css"> <!-- Original -->


<link rel="stylesheet" type="text/css" href="libs/prism/prism.css"> <!-- original -->
<link rel="stylesheet" type="text/css" href="assets/styles/libs/bootstrap-notify/bootstrap-notify.min.css"> <!-- customization -->

</head>
<!-- END HEAD -->

<body class="ks-navbar-fixed ks-sidebar-default ks-sidebar-default ks-sidebar-position-fixed ks-page-header-fixed ks-theme-primary ks-page-loading"> <!-- remove ks-page-header-fixed to unfix header -->

    <!-- BEGIN HEADER -->
<nav class="navbar ks-navbar">
    <!-- BEGIN HEADER INNER -->
    <!-- BEGIN LOGO -->
    <div href="#" class="navbar-brand">
        <!-- BEGIN RESPONSIVE SIDEBAR TOGGLER -->
        <a href="#" class="ks-sidebar-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a>
        <a href="#" class="ks-sidebar-mobile-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a>
        <!-- END RESPONSIVE SIDEBAR TOGGLER -->
        <a href="index-2.html" class="ks-logo"> <!--title --></a>

        <!-- BEGIN GRID NAVIGATION -->
        <span class="nav-item dropdown ks-dropdown-grid">
            <a class="nav-link " data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false"></a>
          
        </span>
        <!-- END GRID NAVIGATION -->
    </div>
    <!-- END LOGO -->

    <!-- BEGIN MENUS -->
    <div class="ks-wrapper">
        <nav class="nav navbar-nav">
       
        </nav>
		
		  <!-- BEGIN NAVBAR USER -->
                <div class="nav-item dropdown ks-user">
                    <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">
                       
                        <span class="ks-info">
                            <span class="ks-name"><?php  echo $_SESSION['lname']." ".$_SESSION['fname']; ?></span>
                            <span class="ks-description">Member</span>
                        </span>
                    </a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="Preview">
                        <a class="dropdown-item" href="#">
                            <span class="fa fa-user-circle-o ks-icon"></span>
                            <span>Profile</span>
                        </a>
                       
                        <a class="dropdown-item" href="logout.php">
                            <span class="fa fa-sign-out ks-icon" aria-hidden="true"></span>
                            <span>Logout</span>
                        </a>
                    </div>
                </div>
                <!-- END NAVBAR USER -->
				

        <!-- BEGIN NAVBAR ACTIONS TOGGLER -->
        <nav class="nav navbar-nav ks-navbar-actions-toggle">
            <a class="nav-item nav-link" href="#">
                <span class="fa fa-ellipsis-h ks-icon ks-open"></span>
                <span class="fa fa-close ks-icon ks-close"></span>
            </a>
        </nav>
        <!-- END NAVBAR ACTIONS TOGGLER -->

        <!-- BEGIN NAVBAR MENU TOGGLER -->
        <nav class="nav navbar-nav ks-navbar-menu-toggle">
            <a class="nav-item nav-link" href="#">
                <span class="fa fa-th ks-icon ks-open"></span>
                <span class="fa fa-close ks-icon ks-close"></span>
            </a>
        </nav>
        <!-- END NAVBAR MENU TOGGLER -->
    </div>
    <!-- END MENUS -->
    <!-- END HEADER INNER -->
</nav>
<!-- END HEADER -->






<div class="ks-container">
    
    <!-- BEGIN DEFAULT SIDEBAR -->
<div class="ks-column ks-sidebar ks-info">
    <div class="ks-wrapper">
        <ul class="nav nav-pills nav-stacked">
            <li class="nav-item ks-user dropdown">
                <a class="nav-link dropdown-toggle"  href="#" role="button" aria-haspopup="true" aria-expanded="false">
                
                    <div class="ks-info">
              
                        <div class="ks-text">Member</div>
                    </div>
                </a>
                <div class="dropdown-menu">
                    <a class="dropdown-item" href="std_list.html">Profile</a>
                   
                </div>
            </li>
       
            
           <li class="nav-item">
                <a class="nav-link" href="index.html">
                    <span class="ks-icon fa fa-plus"></span>
                    <span>Add Student</span>
                </a>
            </li>

			<li class="nav-item">
                <a class="nav-link" href="std_list.html">
                    <span class="ks-icon fa fa-users"></span>
                    <span>View Student</span>
                </a>
            </li> 
			
			
        </ul>
    </div>
</div>
<!-- END DEFAULT SIDEBAR -->





    <div class="ks-column ks-page">
       
<!-- END DASHBOARD HEADER -->

<!-- BEGIN DASHBOARD CONTENT -->
<div class="ks-content">
    <div class="ks-body">
        <div class="container-fluid ks-rows-section">
            <div class="row ks-widgets-collection">
			<div class="col-md-1"></div>
                <div class="col-md-10">
                   <div class="card panel panel-default header-gray">
                                <h5 class="card-header">
                                  Students List
                                </h5>
                                <div class="card-block">
                                    						
<div id="ks-izi-modal-large"
     class="ks-izi-modal">
    <p>
	<center>Fetching record! Please wait</center>
	
	<center> <img class="loader" src="assets/img/loader.gif" /></center>
	
	<div class="res"></div>
	</p>
</div>
<div class="table table-responsive">
						<table class="table table-borderd">
						<thead>
              <tr>  <th>S/N</th> <th>Student Id</th> <th>Full Name</th> <th>Username</th> <th>Email</th> <th>Class</th> <th>Gender</th> <th>Birthday</th><th>Address</th> <th>Phone Number</th>  <th>View</th><th>Update</th> <th>Delete</th></tr> </thead>
			  
			  <tbody></tbody>
								  </table>		
									
									</div>
					
                                </div>
                            </div>
                </div>
                <div class="col-md-1"></div>
            </div>
       
			
        </div>
    </div>
</div>
<!-- END DASHBOARD CONTENT -->
    </div>
</div>


<!-- BEGIN PAGE LEVEL PLUGINS -->
<script src="libs/jquery/jquery.min.js"></script>
<script src="libs/responsejs/response.min.js"></script>
<script src="libs/loading-overlay/loadingoverlay.min.js"></script>
<script src="libs/tether/js/tether.min.js"></script>
<script src="libs/bootstrap/js/bootstrap.min.js"></script>
<script src="libs/jscrollpane/jquery.jscrollpane.min.js"></script>
<script src="libs/jscrollpane/jquery.mousewheel.js"></script>
<script src="libs/flexibility/flexibility.js"></script>
<!-- END PAGE LEVEL PLUGINS -->
<script src="libs/sweetalert/sweetalert.min.js"></script>

<!-- BEGIN THEME LAYOUT SCRIPTS -->
<script src="assets/scripts/common.min.js"></script>
<!-- END THEME LAYOUT SCRIPTS -->

<!-- BEGIN DASHBOARD SCRIPTS -->
<script src="libs/d3/d3.min.js"></script>
<script src="libs/count-up/count-up.min.js"></script>
<script src="assets/scripts/charts/area/area.chart.min.js"></script>
<script src="assets/scripts/charts/radial-progress/radial-progress.chart.min.js"></script>
<script src="assets/scripts/charts/bar/inline-bar.chart.min.js"></script>
<script type="text/javascript" src="../../../../../www.gstatic.com/charts/loader.js"></script>


<script src="libs/jquery-confirm/jquery-confirm.min.js"></script>

<!-- BEGIN THEME LAYOUT SCRIPTS -->
<script src="assets/scripts/common.min.js"></script>
<!-- END THEME LAYOUT SCRIPTS -->

<script src="libs/izi-modal/js/iziModal.min.js"></script>


<script src="libs/bootstrap-notify/bootstrap-notify.min.js"></script>
<script src="libs/prism/prism.js"></script>
<div class="ks-mobile-overlay"></div>

</body>

<script>
	function Notify(title,message,type){
			$.notify({
	title:title,
	message:message
},{
	type:type
});
		}
</script>

</html>



<script src="libs/jquery-confirm/jquery-confirm.min.js"></script>

<script type="text/javascript">

					function getRecord(){
						//Dialog()
						 $('#ks-izi-modal-large').show();
								
								$.ajax({
									type:"get",
									url:"/getrecord",
									success: function(response){
										console.log(response);
										localStorage.setItem('students',response);
										var tbodyEl=$('tbody');
										tbodyEl.html(" ");
										var n=0;
										response.data.forEach(function(student){
										n++
										tbodyEl.append("<tr><td class='id'>"+n+"</td>"+
										"<td class='std_id'>"+response.data[n].std_id+"</td>"+
										"<td class=''>"+response.data[n].fname+"</td>"+
										"<td class=''>"+response.data[n].username+"</td>"+
										"<td class=''>"+response.data[n].email+"</td>"+
										"<td class=''>"+response.data[n].class+"</td>"+
										"<td class=''>"+response.data[n].gender+"</td>"+
										"<td class=''>"+response.data[n].bday+"</td>"+
										"<td class=''>"+response.data[n].add+"</td>"+
										"<td class=''>"+response.data[n].phone+"</td>"+
										"<td class=''><button id='view' class='btn btn-block btn-success waves-effect waves-light m-r-10'>View</button></td>"+
										"<td class=''><button id='update' class='btn btn-block btn-primary waves-effect waves-light m-r-10'>Update</button></td>"+
										"<td class=''><button id='delete' class='btn btn-block btn-danger waves-effect waves-light m-r-10'>Delete</button></td>"+
									
										"</tr>");
										})
									}
								});
								}
									
							$('table').on('click','#update',function(){
							var rowEl=$(this).closest('tr');
							var id=rowEl.find('.std_id').text()
						localStorage.setItem('std_id',id);
							var delay = 1000;
										setTimeout((function(){ window.location="update_std.html"}), delay);  
							});
							
							$('table').on('click','#view',function(){
							var rowEl=$(this).closest('tr');
							var id=rowEl.find('.std_id').text()
						localStorage.setItem('std_id',id);
							var delay = 1000;
										setTimeout((function(){ window.location="view.html"}), delay);  
							});
							
							
							$('table').on('click','#delete',function(){
							var rowEl=$(this).closest('tr');
							var std_id=rowEl.find('.std_id').text()
						//localStorage.setItem('rowid',id);
						$.ajax({
									type:"DELETE",
									url:"/delete?std_id="+std_id,
									success: function(response){
										console.log(response);
										 $('#ks-izi-modal-large').hide();
										if(response.status=="200"){
									
											Notify("Success",response.message,"success");
									
									var delay = 5000;
										setTimeout((function(){ window.location.reload()}), delay);  
									}else
									{
								
										Notify("Failed","An error occured while processing your request","danger-active");
									
											$('#ks-izi-modal-large').hide();
									}
									}
								});
								
							});
						
		
		
	$(document).ready(function () {
	getRecord();
        $('#ks-izi-modal-large').hide();
    })

		
						</script>
